plugins {
    id 'java'
    id 'com.github.johnrengelman.shadow' version '8.1.1'
}

repositories {
    mavenCentral()
}

build.dependsOn shadowJar

version= "1.6.0"
group = "me.towdium.pinin"

shadowJar {
    exclude 'it/unimi/dsi/fastutil/shorts/**'
    exclude 'it/unimi/dsi/fastutil/longs/**'
    exclude 'it/unimi/dsi/fastutil/floats/**'
    exclude 'it/unimi/dsi/fastutil/doubles/**'
    exclude 'it/unimi/dsi/fastutil/bytes/**'
    exclude 'it/unimi/dsi/fastutil/booleans/**'
    exclude 'it/unimi/dsi/fastutil/ints/*Map*'
    exclude 'it/unimi/dsi/fastutil/objects/*2Short*Map*'
    exclude 'it/unimi/dsi/fastutil/objects/*2Reference*Map*'
    exclude 'it/unimi/dsi/fastutil/objects/*2Long*Map*'
    exclude 'it/unimi/dsi/fastutil/objects/*2Int*Map*'
    exclude 'it/unimi/dsi/fastutil/objects/*2Float*Map*'
    exclude 'it/unimi/dsi/fastutil/objects/*2Double*Map*'
    exclude 'it/unimi/dsi/fastutil/objects/*2Char*Map*'
    exclude 'it/unimi/dsi/fastutil/objects/*2Byte*Map*'
    exclude 'it/unimi/dsi/fastutil/objects/*2Boolean*Map*'
    exclude 'it/unimi/dsi/fastutil/chars/*2Short*Map*'
    exclude 'it/unimi/dsi/fastutil/chars/*2Reference*Map*'
    exclude 'it/unimi/dsi/fastutil/chars/*2Long*Map*'
    exclude 'it/unimi/dsi/fastutil/chars/*2Int*Map*'
    exclude 'it/unimi/dsi/fastutil/chars/*2Float*Map*'
    exclude 'it/unimi/dsi/fastutil/chars/*2Double*Map*'
    exclude 'it/unimi/dsi/fastutil/chars/*2Char*Map*'
    exclude 'it/unimi/dsi/fastutil/chars/*2Byte*Map*'
    exclude 'it/unimi/dsi/fastutil/chars/*2Boolean*Map*'
    relocate 'it.unimi.dsi.fastutil', 'me.towdium.pinin.fastutil'
}

test {
    useJUnitPlatform()
    dependsOn cleanTest
    testLogging.showStandardStreams = true
}

tasks.withType(JavaCompile).configureEach {
    options.encoding = "UTF-8"
}

dependencies {
    implementation 'it.unimi.dsi:fastutil:8.3.0'
    testImplementation 'org.junit.jupiter:junit-jupiter:5.7.1'
    testRuntimeOnly 'org.junit.platform:junit-platform-launcher'
}

compileJava   {
    sourceCompatibility = '1.8'
    targetCompatibility = '1.8'
}
